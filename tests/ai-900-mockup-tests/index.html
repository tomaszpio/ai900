<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AI-900 Practice Questions</title>
  <!-- google font -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet" />
  <!-- custom css -->
  <link rel="stylesheet" href="style.css" />
  <style>
  :root {
    color-scheme: light;
    --page-max-width: 70rem;
    --surface: #ffffff;
    --surface-alt: #f8f9fb;
    --border: #d0d7de;
    --accent: #004578;
  }

  *,
  *::before,
  *::after {
    box-sizing: border-box;
  }

  body {
    font-family: "Segoe UI", sans-serif;
    background: var(--surface-alt);
    color: #1f1f1f;
    margin: 0;
    padding: clamp(1rem, 4vw, 2.5rem);
    line-height: 1.6;
  }

  .return-home {
    position: fixed;
    top: clamp(0.75rem, 2vw, 1.25rem);
    right: clamp(0.75rem, 3vw, 1.5rem);
    z-index: 1000;
    display: inline-flex;
    align-items: center;
    gap: 0.35rem;
    padding: 0.45rem 0.85rem;
    background: var(--accent, #004578);
    color: #ffffff;
    border-radius: 999px;
    text-decoration: none;
    font-weight: 600;
    font-size: 0.85rem;
    border: 1px solid rgba(255, 255, 255, 0.45);
    box-shadow: 0 6px 16px rgba(0, 69, 120, 0.18);
    transition: transform 0.2s ease, box-shadow 0.2s ease, background-color 0.2s ease;
  }

  .return-home svg {
    width: 1em;
    height: 1em;
    fill: currentColor;
  }

  .return-home:hover,
  .return-home:focus-visible {
    background: var(--accent-strong, #00345c);
    box-shadow: 0 14px 30px rgba(0, 69, 120, 0.28);
    transform: translateY(-1px);
  }

  @media (max-width: 600px) {
    .return-home {
      font-size: 0.8rem;
      padding: 0.4rem 0.75rem;
      top: 0.75rem;
      right: 0.75rem;
    }
  }

  body > * {
    width: min(100%, var(--page-max-width));
    margin: 0 auto;
  }

  h1,
  h2,
  h3 {
    color: var(--accent);
    margin-top: 0;
  }

  p.description {
    max-width: 56rem;
    margin-bottom: clamp(1.5rem, 4vw, 2.25rem);
  }

  section.mock-tests {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
    gap: clamp(0.85rem, 3vw, 1.25rem);
    margin-bottom: clamp(2rem, 5vw, 3rem);
  }

  .card {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: clamp(1rem, 3vw, 1.4rem);
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
  }

    .mock-test-card h2 {
      font-size: 1.1rem;
    }

    .mock-test-card ul {
      padding-left: 1.1rem;
      margin: 0.75rem 0 0;
    }

    .mock-test-card li {
      margin-bottom: 0.35rem;
    }

  section.question-bank {
    max-width: min(64rem, 100%);
    margin: 0 auto;
  }

  .question-intro {
    margin-bottom: clamp(1.25rem, 4vw, 1.75rem);
  }

  .question-list {
    display: grid;
    gap: clamp(0.75rem, 2.5vw, 1.15rem);
  }

  .question-card {
    border-radius: 12px;
    background: var(--surface);
    border: 1px solid var(--border);
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
    padding: clamp(0.75rem, 2.4vw, 1.1rem) clamp(0.9rem, 3vw, 1.3rem);
    transition: border-color 0.2s ease, box-shadow 0.2s ease;
  }

    .question-card summary {
      cursor: pointer;
      font-weight: 600;
      display: flex;
      flex-direction: column;
      gap: 0.35rem;
      outline: none;
    }

    .question-card[open] {
      border-color: #004578;
      box-shadow: 0 6px 12px rgba(0, 69, 120, 0.12);
    }

    .question-number {
      font-size: 0.85rem;
      text-transform: uppercase;
      letter-spacing: 0.04em;
      color: #004578;
    }

    .question-text {
      color: #1f1f1f;
    }
    .questionFormat h1 {
      font-size: 1.1rem;
      margin-top: 0;
      margin-bottom: 0.5rem;
    }
    .question p {
      margin: 0.25rem 0 0.75rem 0;
    }
    .answer ul {
      list-style: none;
      padding-left: 0;
      margin: 0.25rem 0 0.5rem 0;
    }

  .choice-item {
    background: #fdfdff;
    border: 1px solid #d0d7de;
    border-radius: 10px;
    padding: clamp(0.55rem, 2vw, 0.8rem) clamp(0.65rem, 2.4vw, 1rem);
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.04);
  }

    .choice-status {
      display: inline-flex;
      align-items: center;
      gap: 0.35rem;
      font-size: 0.85rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.03em;
      color: #1f1f1f;
      margin-bottom: 0.35rem;
    }

    .choice-text {
      margin: 0;
      color: #1f1f1f;
    }

    .question-answer p {
      margin: 0.35rem 0 0;
      font-weight: 600;
    }

  .question-rationale {
    background: #f3f9ff;
    border-radius: 8px;
    padding: clamp(0.6rem, 2.3vw, 0.85rem);
  }

    .question-rationale p:last-child {
      margin-bottom: 0;
    }

    .loading-state {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      color: #004578;
      font-weight: 600;
    }

    .error-state {
      color: #9a0007;
      background: #fdecea;
      border-radius: 8px;
      padding: 0.75rem 1rem;
      border: 1px solid #f5c6cb;
    }

  @media (max-width: 800px) {
    section.mock-tests {
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    }
  }

  @media (max-width: 640px) {
    body {
      padding: clamp(1rem, 6vw, 1.5rem);
    }

    .choice-list {
      gap: 0.65rem;
    }
  }

  @media (max-width: 420px) {
    section.mock-tests {
      grid-template-columns: 1fr;
    }
  }
  </style>
</head>
<body>
  <a class="return-home" href="../../index.html">
    <svg aria-hidden="true" viewBox="0 0 24 24" focusable="false">
      <path d="M12 4.248 4.5 10v10h5v-5h5v5h5V10z"></path>
    </svg>
    <span>Home</span>
  </a>
  <h1>AI-900 Mockup Tests</h1>
  <p class="description">
    Use these mock tests to reinforce your understanding of Azure AI Fundamentals concepts.
    Each mini-assessment focuses on a specific exam objective and includes answer explanations.
  </p>
  <section class="mock-tests">
    <article class="mock-test-card card">
      <h2>Responsible AI Principles</h2>
      <p>Evaluate how Azure services help organizations apply responsible AI principles across fairness, reliability, privacy, and inclusiveness.</p>
      <ul>
        <li>10 scenario-based questions</li>
        <li>Instant answer review</li>
        <li>Reference links for further study</li>
      </ul>
    </article>
    <article class="mock-test-card card">
      <h2>Azure Machine Learning Workflow</h2>
      <p>Review the stages of the machine learning lifecycle, from data preparation through model deployment and monitoring.</p>
      <ul>
        <li>12 multiple-choice questions</li>
        <li>Hands-on lab recommendations</li>
        <li>Exam tips and key takeaways</li>
      </ul>
    </article>
    <article class="mock-test-card card">
      <h2>Applied AI Services</h2>
      <p>Check your understanding of Azure Cognitive Services, including Vision, Language, Speech, and Decision capabilities.</p>
      <ul>
        <li>8 practical scenario questions</li>
        <li>Sample architecture diagrams</li>
        <li>Links to Microsoft Learn modules</li>
      </ul>
    </article>
  </section>

  <section class="question-bank" aria-labelledby="practice-questions-heading">
    <div class="question-intro">
      <h2 id="practice-questions-heading">AI-900 Practice Questions</h2>
      <p>Explore a curated collection of real exam-style questions. Expand a question to reveal the correct answer and supporting rationale pulled directly from the latest mock exam export.</p>
      <p id="question-loading" class="loading-state" role="status" aria-live="polite">Loading questions…</p>
      <noscript>
        <p class="error-state">JavaScript is required to load the practice questions. Enable JavaScript and refresh the page.</p>
      </noscript>
    </div>
  </div>

  <script>
    const ADDITIONAL_CHOICES = new Map([
      [
        `Which type of artificial intelligence (AI) workload provides the ability to generate bounding boxes that identify the locations of different types of vehicles in an image?`,
        [
          { text: 'image classification', isCorrect: false },
          { text: 'optical character recognition (OCR)', isCorrect: false },
          { text: 'semantic segmentation', isCorrect: false },
        ],
      ],
      [
        `Which type of artificial intelligence (AI) workload provides the ability to classify individual pixels in an image depending on the object that they represent?`,
        [
          { text: 'object detection', isCorrect: false },
          { text: 'image classification', isCorrect: false },
        ],
      ],
      [
        `Which artificial intelligence (AI) workload scenario is an example of natural language processing (NLP)?`,
        [
          { text: 'detecting anomalies in equipment sensor data', isCorrect: false },
          { text: 'forecasting quarterly revenue', isCorrect: false },
          { text: 'tagging landscape photos with locations', isCorrect: false },
        ],
      ],
      [
        `You are exploring solutions to improve the document search and indexing service for employees. You need an artificial intelligence (AI) search solution that will include searching text in various types of documents, such as images. Which type of AI workload is this?`,
        [
          { text: 'conversational AI', isCorrect: false },
          { text: 'predictive maintenance', isCorrect: false },
        ],
      ],
      [
        `Which two artificial intelligence (AI) workload features are part of the Azure AI Vision service? Each correct answer presents a complete solution.`,
        [
          { text: 'sentiment analysis', isCorrect: false },
          { text: 'key phrase extraction', isCorrect: false },
        ],
      ],
      [
        `Which principle of responsible artificial intelligence (AI) has the objective of ensuring that AI solutions benefit all parts of society regardless of gender or ethnicity?`,
        [
          { text: 'reliability and safety', isCorrect: false },
          { text: 'accountability', isCorrect: false },
          { text: 'privacy and security', isCorrect: false },
        ],
      ],
      [
        `Which principle of responsible artificial intelligence (AI) defines the framework of governance and organization principles that meet ethical and legal standards of AI solutions?`,
        [
          { text: 'transparency', isCorrect: false },
          { text: 'fairness', isCorrect: false },
          { text: 'reliability and safety', isCorrect: false },
        ],
      ],
      [
        `Which principle of responsible artificial intelligence (AI) plays the primary role when implementing an AI solution that meet qualifications for business loan approvals?`,
        [
          { text: 'reliability and safety', isCorrect: false },
          { text: 'privacy and security', isCorrect: false },
          { text: 'transparency', isCorrect: false },
        ],
      ],
      [
        `Which two principles of responsible artificial intelligence (AI) are most important when designing an AI system to manage healthcare data? Each correct answer presents part of the solution.`,
        [
          { text: 'fairness', isCorrect: false },
          { text: 'inclusiveness', isCorrect: false },
        ],
      ],
      [
        `You need to identify numerical values that represent the probability of humans developing diabetes based on age and body fat percentage. Which type of machine learning model should you use?`,
        [
          { text: 'k-means clustering', isCorrect: false },
          { text: 'naive bayes classification', isCorrect: false },
        ],
      ],
      [
        `Which type machine learning algorithm predicts a numeric label associated with an item based on that item’s features?`,
        [
          { text: 'clustering', isCorrect: false },
          { text: 'reinforcement learning', isCorrect: false },
        ],
      ],
      [
        `A healthcare organization has a dataset consisting of bone fracture scans that are categorized by using predefined fracture types. The organization wants to use machine learning to detect the different types of bone fractures for new scans before the scans are sent to a medical practitioner. Which type of machine learning is this?`,
        [
          { text: 'reinforcement learning', isCorrect: false },
        ],
      ],
      [
        `You plan to use machine learning to predict the probability of humans developing diabetes based on their age and body fat percentage. What should the model include?`,
        [
          { text: 'one feature and two labels', isCorrect: false },
          { text: 'two labels and no features', isCorrect: false },
          { text: 'only unlabeled data', isCorrect: false },
        ],
      ],
      [
        `Which feature makes regression an example of supervised machine learning?`,
        [
          { text: 'It learns patterns without labels.', isCorrect: false },
          { text: 'It relies exclusively on reinforcement signals.', isCorrect: false },
          { text: 'It generates rules without using historical data.', isCorrect: false },
        ],
      ],
      [
        `A company is using machine learning to predict house prices based on appropriate house attributes. For the machine learning model, which attribute is the label?`,
        [
          { text: 'number of bedrooms', isCorrect: false },
          { text: 'square footage', isCorrect: false },
          { text: 'neighborhood crime rate', isCorrect: false },
        ],
      ],
      [
        `A company wants to predict household water use based on the number of people in a house, the weather temperature, and the time of year. In terms of data labels and features, what is the label in this use case?`,
        [
          { text: 'number of people in the house', isCorrect: false },
          { text: 'weather temperature', isCorrect: false },
          { text: 'time of year', isCorrect: false },
        ],
      ],
      [
        `What should you do after preparing a dataset and before training the machine learning model?`,
        [
          { text: 'deploy the model to a web service', isCorrect: false },
          { text: 'collect real-time telemetry', isCorrect: false },
        ],
      ],
      [
        `You need to create an automated machine learning (automated ML) model. Which resource should you create first in Azure Machine Learning studio?`,
        [
          { text: 'a compute cluster', isCorrect: false },
          { text: 'an inference endpoint', isCorrect: false },
          { text: 'a datastore', isCorrect: false },
        ],
      ],
      [
        `You need to use the Azure Machine Learning designer to deploy a predictive service from a newly trained model. What should you do first in the Machine Learning designer?`,
        [
          { text: 'Register the training dataset.', isCorrect: false },
          { text: 'Clone the training pipeline.', isCorrect: false },
          { text: 'Create a compute instance.', isCorrect: false },
        ],
      ],
      [
        `You train a regression model by using automated machine learning (automated ML) in the Azure Machine Learning studio. You review the best model summary. You need to publish the model for others to use from the internet. What should you do next?`,
        [
          { text: 'Register the dataset.', isCorrect: false },
          { text: 'Create a labeling project.', isCorrect: false },
          { text: 'Run hyperparameter tuning again.', isCorrect: false },
        ],
      ],
      [
        `Which artificial intelligence (AI) technique should be used to extract the name of a store from a photograph displaying the store front?`,
        [
          { text: 'face detection', isCorrect: false },
          { text: 'speech-to-text', isCorrect: false },
          { text: 'key phrase extraction', isCorrect: false },
        ],
      ],
      [
        `You have a set of images. Each image shows multiple vehicles. What allows you to identity different vehicle types in the same traffic monitoring image?`,
        [
          { text: 'semantic segmentation', isCorrect: false },
          { text: 'optical character recognition (OCR)', isCorrect: false },
          { text: 'image classification', isCorrect: false },
        ],
      ],
      [
        `Which feature of computer vision involves associating an image with metadata that summarizes the attributes of the image?`,
        [
          { text: 'optical character recognition (OCR)', isCorrect: false },
          { text: 'face verification', isCorrect: false },
          { text: 'speech transcription', isCorrect: false },
        ],
      ],
      [
        `Which analytical task of the Azure AI Vision service returns bounding box coordinates?`,
        [
          { text: 'image classification', isCorrect: false },
          { text: 'optical character recognition (OCR)', isCorrect: false },
          { text: 'semantic segmentation', isCorrect: false },
        ],
      ],
      [
        `Which additional piece of information is included with each phrase returned by an image description task of the Azure AI Vision?`,
        [
          { text: 'image width and height', isCorrect: false },
        ],
      ],
      [
        `Which two prebuilt models allow you to use the Azure AI Document Intelligence service to scan information from international passports and sales accounts? Each correct answer presents part of the solution.`,
        [
          { text: 'business card model', isCorrect: false },
          { text: 'receipt model', isCorrect: false },
        ],
      ],
      [
        `When using the Azure AI Face service, what should you use to perform one-to-many or one-to-one face matching? Each correct answer presents a complete solution.`,
        [
          { text: 'face detection', isCorrect: false },
        ],
      ],
      [
        `Which service can you use to train an image classification model?`,
        [
          { text: 'Azure Databricks', isCorrect: false },
          { text: 'Azure Synapse Analytics', isCorrect: false },
        ],
      ],
      [
        `Which natural language processing (NLP) technique normalizes words before counting them?`,
        [
          { text: 'tokenization', isCorrect: false },
          { text: 'named entity recognition', isCorrect: false },
          { text: 'speech synthesis', isCorrect: false },
        ],
      ],
      [
        `Which natural language processing (NLP) technique assigns values to words such as plant and flower, so that they are considered closer to each other than a word such as airplane?`,
        [
          { text: 'translation', isCorrect: false },
          { text: 'keyword extraction', isCorrect: false },
          { text: 'topic modeling', isCorrect: false },
        ],
      ],
      [
        `What is the confidence score returned by the Azure AI Language detection service of natural language processing (NLP) for an unknown language name?`,
        [
          { text: '0', isCorrect: false },
          { text: '1', isCorrect: false },
          { text: '0.5', isCorrect: false },
        ],
      ],
      [
        `Which part of speech synthesis in natural language processing (NLP) involves breaking text into individual words such that each word can be assigned phonetic sounds?`,
        [
          { text: 'sentence segmentation', isCorrect: false },
          { text: 'speech synthesis', isCorrect: false },
        ],
      ],
      [
        `Which three values are returned by the language detection feature of the Azure AI Language service in Azure?`,
        [
          { text: 'Region', isCorrect: false },
          { text: 'Confidence interval', isCorrect: false },
        ],
      ],
      [
        `Which Azure resource provides direct access to both Azure AI Translator and Azure AI Speech services through a single endpoint and authentication key?`,
        [
          { text: 'Azure AI Foundry', isCorrect: false },
          { text: 'Azure Machine Learning', isCorrect: false },
          { text: 'Azure Cognitive Search', isCorrect: false },
        ],
      ],
      [
        `When using the Azure AI Service for Language, what should you use to provide further information online about entities extracted from a text?`,
        [
          { text: 'sentiment analysis', isCorrect: false },
          { text: 'key phrase extraction', isCorrect: false },
        ],
      ],
      [
        `Which feature of the Azure AI Speech service can identify distinct user voices?`,
        [
          { text: 'speech synthesis', isCorrect: false },
          { text: 'language detection', isCorrect: false },
          { text: 'keyword spotting', isCorrect: false },
        ],
      ],
      [
        `Select the answer that correctly completes the sentence. [Answer choice] use plugins to provide end users with the ability to get help with common tasks from a generative AI model.`,
        [
          { text: 'playbooks', isCorrect: false },
          { text: 'dashboards', isCorrect: false },
          { text: 'pipelines', isCorrect: false },
        ],
      ],
      [
        `At which layer can you apply content filters to suppress prompts and responses for a responsible generative AI solution?`,
        [
          { text: 'data ingestion layer', isCorrect: false },
        ],
      ],
      [
        `Select the answer that correctly completes the sentence. [Answer choice] can return responses, such as natural language, images, or code, based on natural language input.`,
        [
          { text: 'Discriminative AI', isCorrect: false },
          { text: 'Predictive analytics', isCorrect: false },
          { text: 'Automation scripts', isCorrect: false },
        ],
      ],
      [
        `Select the answer that correctly completes the sentence. [Answer choice] can used to identify constraints and styles for the responses of a generative AI model.`,
        [
          { text: 'vector indexes', isCorrect: false },
        ],
      ],
      [
        `As per the NIST AI Risk Management Framework, what is the first stage to consider when developing a responsible generative AI solution?`,
        [
          { text: 'Mitigate risks before testing.', isCorrect: false },
        ],
      ],
      [
        `Which two capabilities are examples of a GPT model? Each correct answer presents a complete solution.`,
        [
          { text: 'Render 3D animations.', isCorrect: false },
        ],
      ],
      [
        `Which three capabilities are examples of image generation features for a generative AI model? Each correct answer presents a complete solution.`,
        [
          { text: 'real-time speech translation', isCorrect: false },
          { text: 'dataset labeling', isCorrect: false },
        ],
      ],
      [
        `You plan to develop an image processing solution that will use DALL-E as a generative AI model. Which capability is NOT supported by the DALL-E model?`,
        [
          { text: 'image generation from prompts', isCorrect: false },
          { text: 'creating variations of an uploaded image', isCorrect: false },
          { text: 'editing regions of an image', isCorrect: false },
        ],
      ],
      [
        `Which generative AI model is used to generate images based on natural language prompts?`,
        [
          { text: 'GPT-4', isCorrect: false },
          { text: 'Codex', isCorrect: false },
          { text: 'Whisper', isCorrect: false },
        ],
      ],
    ]);

    const LEARN_ENGLISH_LOCALE = 'en-en';
    const LEARN_ENGLISH_BASE = `https://learn.microsoft.com/${LEARN_ENGLISH_LOCALE}/`;
    const LEARN_LINK_PATTERN = /https:\/\/learn\.microsoft\.com\/(?:(?:[a-z]{2}-[a-z]{2})\/)*/gi;

    function normalizeLearnLink(url) {
      if (typeof url !== 'string' || !url.includes('learn.microsoft.com')) {
        return url;
      }

      return url.replace(LEARN_LINK_PATTERN, LEARN_ENGLISH_BASE);
    }

    function normalizeLearnLinksInHtml(html) {
      if (typeof html !== 'string' || !html.includes('learn.microsoft.com')) {
        return html || '';
      }

      return html.replace(LEARN_LINK_PATTERN, LEARN_ENGLISH_BASE);
    }

    const QUESTION_SOURCES = [
      {
        url: normalizeLearnLink(
          'https://learn.microsoft.com/credentials/certifications/azure-ai-fundamentals/practice/results?assessmentId=26&practice-assessment-type=certification&snapshotId=51a634ac-4649-466d-bf6e-99c281e7842a'
        ),
        fallbackUrl: '../../ai900Mockup.html.html',
        isRequired: true,
      },
      {
        url: normalizeLearnLink(
          'https://learn.microsoft.com/credentials/certifications/exams/dummy/practice/results?assessmentId=26&snapshotId=4b58bfc6-3379-4ee4-b586-3e3ab9197381'
        ),
        fallbackUrl: '../../ai900Mockup2.html',
        isRequired: false,
      },
    ];

    function appendQuestionsFromDocument(doc, questionEntries, seenQuestions) {
      const articles = Array.from(doc.querySelectorAll('article'));

      if (!articles.length) {
        return false;
      }

      articles.forEach((article) => {
        const questionText = article.querySelector('section.content p');
        const rationaleSection = article.querySelector('[id^="question-rationale"]');

        const cleanedQuestion = questionText?.textContent.trim();
        if (!cleanedQuestion) {
          return;
        }

        const normalizedQuestion = cleanedQuestion.replace(/\s+/g, ' ').trim().toLowerCase();
        if (seenQuestions.has(normalizedQuestion)) {
          return;
        }

        const choiceSections = article.querySelectorAll(
          'section[id^="question-selected-answer"], section[id^="question-correct-answer"]'
        );
        const choiceMap = new Map();

        choiceSections.forEach((section) => {
          const listItems = section.querySelectorAll('li');
          listItems.forEach((item) => {
            const choice = item.querySelector('.quiz-choice');
            const textElement = choice?.querySelector('.checkb0x-text');
            const rawText = textElement?.textContent || '';
            const text = rawText.replace(/\s+/g, ' ').trim();

            if (!choice || !text) {
              return;
            }

            const key = text.toLowerCase();
            const existing = choiceMap.get(key) || {
              text,
              isCorrect: false,
              isSelected: false,
            };

            const isCorrect = choice.classList.contains('is-correct');
            const checkbox = choice.querySelector('.checkbox-check');
            const radio = choice.querySelector('.radio-dot');
            const isSelected =
              checkbox?.classList.contains('is-checked') || radio?.classList.contains('is-checked') || false;

            existing.isCorrect = existing.isCorrect || isCorrect;
            existing.isSelected = existing.isSelected || isSelected;
            choiceMap.set(key, existing);
          });
        });

        const choiceListData = Array.from(choiceMap.values());

        const overrideChoices = ADDITIONAL_CHOICES.get(cleanedQuestion);
        if (overrideChoices?.length) {
          const existingTexts = new Map(
            choiceListData.map((choice) => [choice.text.trim().toLowerCase(), choice])
          );

          overrideChoices.forEach((override) => {
            const normalized = override.text.trim().toLowerCase();
            const existing = existingTexts.get(normalized);

            if (existing) {
              if (override.isCorrect) {
                existing.isCorrect = true;
              }
              return;
            }

            const mergedChoice = {
              text: override.text,
              isCorrect: Boolean(override.isCorrect),
              isSelected: Boolean(override.isSelected && override.isCorrect),
            };

            choiceListData.push(mergedChoice);
            existingTexts.set(normalized, mergedChoice);
          });
        }

        if (!choiceListData.length) {
          return;
        }

        seenQuestions.add(normalizedQuestion);

        questionEntries.push({
          question: cleanedQuestion,
          rationaleHTML: normalizeLearnLinksInHtml(
            rationaleSection ? rationaleSection.innerHTML.trim() : ''
          ),
          choices: choiceListData,
        });
      });

      return true;
    }

    async function loadPracticeQuestions() {
      const loadingState = document.getElementById('question-loading');
      const questionList = document.getElementById('question-list');

      try {
        const parser = new DOMParser();
        const questionEntries = [];
        const seenQuestions = new Set();

        for (const source of QUESTION_SOURCES) {
          const urlsToTry = [source.url, source.fallbackUrl].filter(Boolean);
          let sourceLoaded = false;

          for (const candidateUrl of urlsToTry) {
            let response;
            try {
              response = await fetch(candidateUrl);
            } catch (networkError) {
              console.error(`Failed to request practice questions from ${candidateUrl}.`, networkError);
              continue;
            }

            if (!response.ok) {
              console.warn(
                `Failed to load practice questions from ${candidateUrl} (status ${response.status})`
              );
              continue;
            }

            const htmlText = await response.text();
            const doc = parser.parseFromString(htmlText, 'text/html');

            if (!appendQuestionsFromDocument(doc, questionEntries, seenQuestions)) {
              console.warn(`No practice questions were found in ${candidateUrl}.`);
              continue;
            }

            sourceLoaded = true;
            break;
          }

          if (!sourceLoaded && source.isRequired) {
            throw new Error(
              `No practice questions could be retrieved from the configured URLs for ${source.url}.`
            );
          }
        }

        if (!questionEntries.length) {
          throw new Error('No complete practice questions could be rendered.');
        }

        const fragment = document.createDocumentFragment();

        questionEntries.forEach((entry, index) => {
          const details = document.createElement('details');
          details.className = 'question-card';

          const summary = document.createElement('summary');

          const numberSpan = document.createElement('span');
          numberSpan.className = 'question-number';
          numberSpan.textContent = `Question ${index + 1}`;

          const questionSpan = document.createElement('span');
          questionSpan.className = 'question-text';
          questionSpan.textContent = entry.question;

          summary.appendChild(numberSpan);
          summary.appendChild(questionSpan);
          details.appendChild(summary);

          const body = document.createElement('div');
          body.className = 'question-body';

          const choicesBlock = document.createElement('div');
          choicesBlock.className = 'question-choices';

          const choicesHeading = document.createElement('h3');
          choicesHeading.textContent = 'Answer choices';
          choicesBlock.appendChild(choicesHeading);

          const choiceListElement = document.createElement('ul');
          choiceListElement.className = 'choice-list';

          entry.choices.forEach((choiceData) => {
            const choiceItem = document.createElement('li');
            choiceItem.className = 'choice-item';

            const statusParts = [];
            if (choiceData.isSelected && choiceData.isCorrect) {
              statusParts.push('Selected • Correct');
            } else if (choiceData.isSelected && !choiceData.isCorrect) {
              statusParts.push('Available option');
            } else {
              if (choiceData.isCorrect) {
                statusParts.push('Correct');
              } else {
                statusParts.push('Available option');
              }
            }

            if (statusParts.length) {
              const status = document.createElement('span');
              status.className = 'choice-status';
              status.textContent = statusParts.join(' • ');
              choiceItem.appendChild(status);
            }

            const choiceText = document.createElement('p');
            choiceText.className = 'choice-text';
            choiceText.textContent = choiceData.text;

            choiceItem.appendChild(choiceText);
            choiceListElement.appendChild(choiceItem);
          });

          choicesBlock.appendChild(choiceListElement);
          body.appendChild(choicesBlock);

          const correctChoices = entry.choices.filter((choice) => choice.isCorrect).map((choice) => choice.text);

          if (correctChoices.length) {
            const answerBlock = document.createElement('div');
            answerBlock.className = 'question-answer';

            const answerHeading = document.createElement('h3');
            answerHeading.textContent = correctChoices.length > 1 ? 'Correct answers' : 'Correct answer';

            answerBlock.appendChild(answerHeading);

            if (correctChoices.length === 1) {
              const answerText = document.createElement('p');
              answerText.textContent = correctChoices[0];
              answerBlock.appendChild(answerText);
            } else {
              const answerList = document.createElement('ul');
              answerList.className = 'choice-list';
              correctChoices.forEach((text) => {
                const item = document.createElement('li');
                item.className = 'choice-item';

                const choiceText = document.createElement('p');
                choiceText.className = 'choice-text';
                choiceText.textContent = text;

                item.appendChild(choiceText);
                answerList.appendChild(item);
              });
              answerBlock.appendChild(answerList);
            }

            container.appendChild(block);
          });
      } catch (err) {
        console.error('Failed to load questions JSON:', err);
        container.textContent = 'Failed to load questions. Make sure ai900_questions.json is in the same folder as this index.html.';
      }
    }

    loadQuestions();
  </script>
</body>
</html>
